{"version":3,"sources":["../src/instructor.js"],"names":["define","$","ajax","dashboardSettings","selectCoursesString","select","wrapper","multipleSelect","multiple","placeholder","multipleWidth","filter","find","append","on","selectedCourses","val","saveCoursesPromises","call","methodname","args","data","JSON","stringify","courses","done","window","location","reload"],"mappings":"AAyBAA,OAAM,iCAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,wCAAxB,CAAD,CAAoE,SAASC,CAAT,CAAYC,CAAZ,CAAkC,CACxG,MAAO,CAIHC,iBAAiB,CAAE,2BAASC,CAAT,CAA8B,IACzCC,CAAAA,CAAM,CAAGJ,CAAC,CAAC,8BAAD,CAD+B,CAEzCK,CAAO,CAAGL,CAAC,CAAC,wCAAD,CAF8B,CAI7CI,CAAM,CAACE,cAAP,CAAsB,CAClBC,QAAQ,GADU,CAElBC,WAAW,CAAEL,CAFK,CAGlBM,aAAa,CAAE,GAHG,CAIlBC,MAAM,GAJY,CAAtB,EAOAL,CAAO,CAACM,IAAR,CAAa,iBAAb,EAAgCC,MAAhC,CACI,+CADJ,EAIAP,CAAO,CAACM,IAAR,CAAa,wBAAb,EAAuCE,EAAvC,CAA0C,OAA1C,CAAmD,UAAW,CAC1D,GAAIC,CAAAA,CAAe,CAAGV,CAAM,CAACW,GAAP,EAAtB,CAEA,GAAsB,IAAnB,EAAAD,CAAH,CAA4B,CACxBA,CAAe,CAAG,EACrB,CAED,GAAIE,CAAAA,CAAmB,CAAGf,CAAI,CAACgB,IAAL,CAAU,CAChC,CACIC,UAAU,CAAE,4CADhB,CAC8DC,IAAI,CAAE,CAC5DC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAACC,OAAO,CAAET,CAAV,CAAf,CADsD,CADpE,CADgC,CAAV,CAA1B,CAQAE,CAAmB,CAAC,CAAD,CAAnB,CAAuBQ,IAAvB,CAA4B,UAAmB,CAC3CC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EACH,CAFD,CAGH,CAlBD,CAmBH,CAtCE,CAwCV,CAzCK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * This plugin provides access to Moodle data in form of analytics and reports in real time.\r\n *\r\n *\r\n * @package    local_intelliboard\r\n * @copyright  2019 IntelliBoard, Inc\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n * @website    https://intelliboard.net/\r\n */\r\n\r\ndefine(['jquery', 'core/ajax', 'local_intelliboard/intb_multipleselect'], function($, ajax, multipleselect) {\r\n    return {\r\n        /**\r\n         * Modal window for settings of instructor dashboard\r\n         */\r\n        dashboardSettings: function(selectCoursesString) {\r\n            var select = $('.instructor-courses-settings');\r\n            var wrapper = $('.instructor-dashboard-settings-wrapper');\r\n\r\n            select.multipleSelect({\r\n                multiple: true,\r\n                placeholder: selectCoursesString,\r\n                multipleWidth: 350,\r\n                filter: true\r\n            });\r\n\r\n            wrapper.find('.ms-drop.bottom').append(\r\n                '<button class=\"btn btn-primary\">OK</button>'\r\n            );\r\n\r\n            wrapper.find('.ms-drop.bottom button').on('click', function() {\r\n                var selectedCourses = select.val();\r\n\r\n                if(selectedCourses == null) {\r\n                    selectedCourses = [];\r\n                }\r\n\r\n                var saveCoursesPromises = ajax.call([\r\n                    {\r\n                        methodname: 'local_intelliboard_save_instructor_courses', args: {\r\n                            data: JSON.stringify({courses: selectedCourses})\r\n                        }\r\n                    },\r\n                ]);\r\n\r\n                saveCoursesPromises[0].done(function(response) {\r\n                    window.location.reload();\r\n                });\r\n            });\r\n        }\r\n    };\r\n});"],"file":"instructor.min.js"}